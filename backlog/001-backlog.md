# Backlog 001

1. [x] You are an expert engineer from Claude Code team at Anthropic. Create CLAUDE.md for this project using following context:
   - Project contains source code in src/ folder and tests in tests/ folder
   - The project has an app called Moments (in src/ folder)
   - Moments is a local-first, agent driven app and built as a wrapper of https://docs.anthropic.com/en/docs/claude-code/sdk
   - Project contains several content (markdown, images) related folders like companies/ and technologies/ which may be referred by the Moments app 
   - The project also contains Claude Code specific folders and files which are reusable by the Moments app via the Claude Code SDK
   - The project features backlog is defined in backlog/ folder
   - Each code generation for this project follows a feature-slice approach generating a working, usable feature
   - IMPORTANT: This project does not create any mock, hardcoded, prototype, or fake features or fallbacks
   - If feature fails then a descriptive error message and debug log is created to help Claude Code iterate on the fix
   - Moments app discovers pivotal moments in the business of AI as these apply to top 100 most valued AI startups and Fortune 100 enterprises managing disruption caused by AI
   - Moments app creates signal from noise by classifying and correlating these pivotal moments around micro factors (company, competition, partners, customer) and macro factors (economic, geo-political, regulation, technology, environment, supply chain, etc.)
   
   **Completion Summary**: Successfully created comprehensive CLAUDE.md file with project overview, structure documentation, development principles (feature-slice approach, no mocks/prototypes), code generation guidelines, and backlog management instructions. The file serves as the central project documentation and development guide for the Moments application.

2. [x] Understand the best practicies of using Claude Code at https://www.anthropic.com/engineering/claude-code-best-practices. Apply these best practices to CLAUDE.md based on the goals of Moments app
   
   **Completion Summary**: Successfully integrated comprehensive Claude Code best practices into CLAUDE.md including: 1) Development Workflow with Explore-Plan-Code-Commit approach and TDD guidelines, 2) Environment Setup with required tools and configuration, 3) Claude Code Optimization Techniques for effective communication and tool usage, 4) Advanced Development Patterns including parallel development and headless mode, 5) Code Style and Testing Guidelines specific to AI analysis features, and 6) Key development principle emphasizing clear targets for iteration. The enhanced documentation now provides detailed guidance for efficient Claude Code usage tailored to the Moments app's AI-driven development needs.
   
3. [x] Add these Claude Code documentation links as reference for this project and update CLAUDE.md with these:
   - https://docs.anthropic.com/en/docs/claude-code/overview
   - https://docs.anthropic.com/en/docs/claude-code/quickstart
   - https://docs.anthropic.com/en/docs/claude-code/common-workflows
   - https://docs.anthropic.com/en/docs/claude-code/hooks-guide
   - https://docs.anthropic.com/en/docs/claude-code/mcp
   - https://docs.anthropic.com/en/docs/claude-code/amazon-bedrock
   
   **Completion Summary**: Successfully added comprehensive Claude Code Documentation References section to CLAUDE.md including: 1) Essential Claude Code Resources with all 6 required documentation links (Overview, Quickstart, Common Workflows, Hooks Guide, MCP, Amazon Bedrock), 2) Integration Notes specific to Moments app goals including AI startup data analysis pipelines, automated content discovery hooks, external API connections via MCP, and enterprise scaling considerations. The documentation provides clear reference points for development teams and contextualizes each resource within the Moments application architecture.
   

4. [x] Add these vibe coding, agents, and headless claude code best practices for this project and update CLAUDE.md with these:
   - @technologies/claude-code/headless-claude-code.md
   - https://docs.anthropic.com/en/docs/claude-code/sdk
   - https://docs.anthropic.com/en/docs/claude-code/sub-agents
   - @technologies/claude-code/vibe-coding-prod.md
   - https://www.anthropic.com/engineering/building-effective-agents
   
   **Completion Summary**: Successfully integrated comprehensive advanced Claude Code best practices into CLAUDE.md including: 1) **Headless Automation** section with SDK integration patterns, Unix tool philosophy, CI automation capabilities, and structured output for programmatic parsing, 2) **Vibe Coding Best Practices** section implementing Eric Breck's production methodology with "forget the code, not the product" philosophy, leaf node focus strategy, verification-first approach, and Claude-as-PM patterns, 3) **Effective Agent Development Principles** section covering Anthropic's methodology with simplicity-first approach, agent vs workflow distinction, sub-agent configuration for specialized tasks (Content Analyzer, Classification Agent, Correlation Engine, Report Generator), and SDK implementation patterns with multi-turn conversations. Updated Environment Setup and Advanced Development Patterns sections to reflect headless automation, vibe coding workflows, session management, and sub-agent orchestration capabilities. The enhanced documentation now provides production-ready guidance for responsible AI-driven development using cutting-edge Claude Code capabilities.

5. [x] Based on the Moments app goals and documentation available to CLAUDE.md create an architecture and technology stack specification in specs/stack.md following best practices for modern AI first app architecture. Update CLAUDE.md with IMPORTANT prefix to refer to specs/stack.md when building Moments app architecture and stack.

   **Completion Summary**: Successfully created comprehensive architecture and technology stack specification in `specs/stack.md` including: 1) **System Architecture** with 4-layer design (Presentation, Agent Orchestration, Data Processing, Storage & Integration), 2) **Technology Stack** covering Frontend (Next.js 14+, React 18+, TypeScript 5+, Tailwind CSS, shadcn/ui), Backend (Claude Code SDK, tRPC, Prisma, SQLite), AI Technologies (specialized sub-agents with TypeScript interfaces, content processing pipeline), Development Tools (Vite, ESLint, Jest/Vitest, Playwright), and CI/CD (GitHub Actions, Claude Code Headless), 3) **Sub-Agent Specifications** with detailed configurations for Content Analyzer, Classification Agent, Correlation Engine, and Report Generator, 4) **Data Models** with SQLite schema for moments, companies, and correlations, 5) **Security & Performance** strategies for local-first optimization, memory management, and data privacy, 6) **Integration Patterns** including MCP server configurations and Claude Code SDK multi-turn conversation examples. Updated CLAUDE.md with IMPORTANT prefix directing developers to reference specs/stack.md for all architecture and technology stack decisions, ensuring consistent implementation following modern AI-first design principles.

6. [x] Based on the Moments app goals, documentation available to CLAUDE.md, and specs/stack.md architecture and stack create a user interface design specification in specs/design.md following best practices for modern AI first app design. Update CLAUDE.md with IMPORTANT prefix to refer to specs/design.md when building Moments app user experience.

   **Completion Summary**: Successfully created comprehensive user interface design specification in `specs/design.md` including: 1) **Design Philosophy** with data-first, AI-native principles and signal clarity focus, 2) **Information Architecture** with primary user journeys (Moment Discovery, Correlation Exploration, Company Deep Dive) and hierarchical navigation structure, 3) **Component Architecture** featuring specialized components like Moment Cards, Agent Status Indicators, Correlation Graphs, Factor Classification Panels, Timeline Visualizations, and Company Intelligence Dashboards, 4) **Design System Specifications** with semantic color palettes for moment types and confidence levels, typography scales using Inter/JetBrains Mono, spacing/layout systems, and component patterns, 5) **Responsive Design Strategy** with mobile-first breakpoints and adaptive layouts, 6) **Interaction Design** with purposeful animations, loading states, WCAG 2.1 AA accessibility compliance, and inclusive design features, 7) **Data Visualization Guidelines** covering chart types for temporal/relational/comparative data with principles for data integrity and progressive disclosure, 8) **Performance Considerations** including virtual scrolling, lazy loading, local-first interface optimizations, and 9) **Development Implementation** with component structure patterns, state management integration, and comprehensive testing strategy. Updated CLAUDE.md with IMPORTANT reference directing developers to specs/design.md for all user experience and interface design decisions, ensuring consistent implementation following modern AI-first design principles.
   
7. [x] Scaffold a minimal Moments app with a feature to hydrate a catalog of customers and technologies by selecting local folders and processing the content within these folders. The app should remember these selections. At runtime the user will select companies/ and technologies/ folders to hydrate the respective companies and technologies catalogs so feel free to understand these folders in advance of building this feature.

   **Completion Summary**: Successfully scaffolded minimal Moments application with comprehensive folder selection and catalog hydration functionality including: 1) **Next.js 14+ App Architecture** with TypeScript 5+, App Router, Tailwind CSS 3+, and shadcn/ui components following specs/stack.md requirements, 2) **Folder Selection System** with intuitive UI allowing users to select companies/ and technologies/ folders with persistent storage using Zustand and local storage, 3) **Content Processing Pipeline** that analyzes folder structures, extracts markdown and image content, and creates structured Company and Technology entities with metadata, 4) **Catalog Hydration Feature** that processes selected folders and populates catalogs with real content from companies/ (Glean, Sierra AI) and technologies/ (Claude Code, LLM Agents, LLM Prompting) folders, 5) **Persistent State Management** using Zustand with localStorage persistence to remember folder selections across sessions, 6) **Responsive Dashboard Interface** with navigation, tabbed catalog views, and detailed content cards showing company/technology information, content items, and metadata, 7) **Error Handling and Loading States** with proper user feedback during processing operations, 8) **Modern UI Components** built with shadcn/ui including Cards, Buttons, Badges, and semantic color system for moment types and confidence levels, and 9) **Type-Safe Architecture** with comprehensive TypeScript interfaces for Companies, Technologies, Content Items, and Catalog State management. The application provides a fully functional foundation for AI business intelligence analysis with local-first data processing and intelligent content discovery capabilities.

8. [x] Create a `config.yml` file in project root. Make folders configurable like companies/ and technologies/ which are source of hydrating respective catalogs in the app.

   **Completion Summary**: Successfully created comprehensive configuration system including: 1) **config.yml file** with structured configuration for catalogs (companies/technologies), app settings, moment classification factors, and sub-agent configurations, 2) **Configuration loader module** (`src/lib/config-loader.ts`) with TypeScript interfaces, YAML parsing using js-yaml library, support for local overrides via config.local.yml with deep merge functionality, client-side configuration loading through API endpoint, and fallback to default configuration, 3) **API endpoint** (`/api/config`) to serve configuration to client-side components, 4) **Updated content processor** to use configured file patterns and source folders from config.yml, 5) **Enhanced folder selection component** to display configured catalog names and descriptions from config.yml and use configured default folders, 6) **Local override support** with config.local.yml (added to .gitignore) for user-specific configuration without affecting version control. The implementation provides flexible, maintainable configuration management for all aspects of the Moments application.

9. [x] Review specs/ folder for new files and update CLAUDE.md with IMPORTANT reference to these files with short description.

   **Completion Summary**: Successfully reviewed specs/ folder and added comprehensive IMPORTANT references to CLAUDE.md including: 1) **specs/blueprint.md** reference for implementing ingestion-to-insight pipeline with visual dataflow diagrams and processing stages, 2) **specs/macro-factors.md** reference for moment classification and factor analysis with comprehensive micro/macro factor tables and pivotal moment examples, 3) **specs/moments_architecture_doc.md** and **specs/moments_architecture.png** references for complete system architecture understanding with detailed pipeline stages and visual diagrams, 4) **specs/tagging-correlation.md** reference for content classification and moment correlation implementation with operational framework for detection, classification, correlation, and ranking algorithms. All new specifications now have clear IMPORTANT prefixes with descriptive guidance for developers on when and how to use each specification file, ensuring comprehensive documentation coverage for the entire Moments application architecture and implementation guidance.

10. [x] Update specs/stack.md and specs/design.md as required based on the new files added to specs/ folder.

   **Completion Summary**: Successfully updated both specs/stack.md and specs/design.md to incorporate comprehensive references to new specification files including: 1) **specs/stack.md updates** - Added "Related Architecture Documentation" section referencing moments_architecture_doc.md, moments_architecture.png, blueprint.md, and tagging-correlation.md; Enhanced Data Processing Layer with detailed pipeline implementation references linking to blueprint.md for complete dataflow diagrams, tagging-correlation.md for operational framework, and macro-factors.md for classification algorithms, 2) **specs/design.md updates** - Added "Related Design Documentation" section providing UI/UX context for macro-factors.md (classification displays), tagging-correlation.md (interaction patterns), blueprint.md (data flow visualizations), and moments_architecture_doc.md (navigation structure); Enhanced Moment Cards component with factor classification reference to macro-factors.md; Updated Factor Classification Panel with implementation reference to macro-factors.md for detailed factor category examples. Both specifications now provide comprehensive cross-references ensuring developers have complete architectural and design context when implementing the Moments application with all new pipeline, architecture, and classification documentation properly integrated.

